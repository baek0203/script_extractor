# YouTube Script Extractor

Extract and organize YouTube video transcripts with AI-powered semantic segmentation using Google Gemini.

## Who Is This For?

- who wants to save video scripts as interview or lecture notes
- who need to find specific parts of video content
- who want to organize video content as text
- who want to communicate with AI using transcripts

## Main Features

### 1. Web Interface & CLI
- **Web Interface**: Easy-to-use Gradio app with instant preview
- **CLI**: Command-line interface for batch processing

### 2. Progressive Loading
- Get basic transcript **immediately** after download
- AI-powered topic segmentation completes in background
- No waiting for full processing to see results

### 3. AI-Powered Topic Segmentation
- Uses **Google Gemini 2.5 Flash Lite** (free API)
- Generates **8-15 descriptive topic titles** automatically
- Each topic groups related sentences with similar meaning
- Example titles: "AI's Impact on Healthcare Diagnosis", "Benefits of Remote Work"

### 4. Multi-Language Support
- **English** (priority)
- **Korean** (secondary)
- Automatically detects available subtitles

### 5. Multiple Output Formats
- **TXT file**: Easy to read, with descriptive topic titles
- **CSV file**: Viewable in Excel (includes timestamps)
- **JSON file**: Structured data with sections and metadata

## ğŸ“¦ Installation

### Step 1: Check Python Installation
Run the following command in your terminal:

```bash
python --version
```

Python 3.8 or higher is required.

### Step 2: Install Dependencies

```bash
pip install -r requirements.txt
```

### Step 3: Set Up Gemini API Key

1. Get your free API key from [Google AI Studio](https://aistudio.google.com/app/apikey)
2. Create a `.env` file in the project root directory:

```bash
GEMINI_API_KEY=your_api_key_here
```

> **Note**: The Gemini API has free tier limits. If you exceed the quota, the tool will automatically fall back to simple segmentation without descriptive topic titles.

## ğŸš€ Usage

### Option 1: Web Interface (Recommended)

Launch the Gradio web app:

```bash
python app.py
```

Then open your browser and go to: `http://localhost:7860`

**Features:**
- Paste YouTube URL and click "Extract"
- See basic transcript **immediately**
- AI-segmented transcript appears automatically when ready
- Two tabs: "ì „ë¬¸ ìë§‰" (plain) and "ì£¼ì œë³„ ìë§‰" (topic-segmented)

### Option 2: CLI (Command Line)

For batch processing or programmatic use:

```bash
python main.py <VIDEO_URL>
```

**Example:**
```bash
python main.py https://www.youtube.com/watch?v=dQw4w9WgXcQ
```

### View Results

When the program completes, files are created in the `data` folder:
```
data/
â””â”€â”€ Video_Title/
    â”œâ”€â”€ transcript.txt        â† Open this file to read!
    â”œâ”€â”€ transcript_plain.txt  â† Plain text without topic titles
    â”œâ”€â”€ transcript.csv        â† Use this if you need timestamps
    â””â”€â”€ transcript.json       â† Structured data for programmatic use
```

## ğŸ“„ Output Examples

### TXT File (With AI-Generated Topic Titles)
```
Video: OpenAI's Sam Altman Talks ChatGPT
URL: https://www.youtube.com/watch?v=...
Processed: 2025-12-27 14:20:00
Paragraphs: 12
================================================================================

### ChatGPT's Future Development and Roadmap

Hello. Today we'll talk about the future of ChatGPT.
Artificial intelligence technology is rapidly advancing, and more changes
are expected in the future.

### AI Agents and Autonomous Systems Overview

Moving on to the next topic, let's look at AI agents.
AI agents are systems that can perform complex tasks on behalf of users.
```

> **Note**: Topic titles are automatically generated by Gemini AI to be descriptive and meaningful, not generic labels like "Topic 1" or "Introduction".

### CSV File (For Excel)
| Start Time | End Time | Content |
|------------|----------|---------|
| 00:00:00 | 00:00:25 | Hello. Today we'll... |
| 00:00:25 | 00:00:50 | Moving on to the next topic... |

### JSON File (Structured Data)
```json
{
  "metadata": {
    "title": "Video Title",
    "url": "https://...",
    "num_sections": 12
  },
  "sections": [
    {
      "title": "ChatGPT's Future Development and Roadmap",
      "sentences": ["Hello.", "Today we'll talk about..."],
      "text": "Hello. Today we'll talk about..."
    }
  ]
}
```

## â“ FAQ

### Q1. What videos are supported?
Any YouTube video with subtitles (English or Korean) is supported. Auto-generated subtitles work too.

### Q2. Are other languages supported?
Currently, **English** (priority) and **Korean** are supported. The tool automatically detects available subtitles.

### Q3. What about videos without subtitles?
You can use auto-generated subtitles if YouTube has created them. The tool will automatically download them.

### Q4. How long does it take?
- **Web Interface**: Basic transcript appears in ~10-30 seconds. AI segmentation completes in background (~30-60 seconds more).
- **CLI**: Full processing takes ~1-2 minutes depending on video length.

### Q5. What if I see "Topic 1, Topic 2" instead of descriptive titles?
This means the Gemini API quota was exceeded or the API call failed. The tool falls back to simple segmentation. Wait for quota reset or check your API key.

### Q6. What if an error occurs?
Check the following:
1. Internet connection status
2. Whether the YouTube URL is correct
3. Whether the video has subtitles
4. Whether your `.env` file has a valid `GEMINI_API_KEY`

## ğŸ“ Real-World Use Cases

### Archiving Learning Materials
```bash
python main.py https://www.youtube.com/watch?v=LECTURE_VIDEO_URL
```
â†’ Save lecture content as text and search through it later.

### Organizing Interview Content
```bash
python main.py https://www.youtube.com/watch?v=INTERVIEW_VIDEO_URL
```
â†’ Read the full interview organized by topic.

### Using with AI Assistants
Send the generated TXT file to ChatGPT or Claude to:
- Summarize video content
- Explain specific sections
- Answer questions about the content

## ğŸ’¡ Tips

### 1. Processing Multiple Videos
Save video URLs in a text file and run the script in a loop.

### 2. File Names Too Long?
File names are automatically truncated to 100 characters. Rename manually if needed.

### 3. Need Timestamp Information?
Open the CSV file to see exactly when each sentence was spoken.

## ğŸ—ï¸ Architecture

### Technology Stack

- **Frontend**: Gradio (web interface)
- **Video Processing**: yt-dlp (YouTube subtitle download)
- **Data Processing**: pandas, webvtt-py
- **AI Segmentation**: Google Gemini 2.5 Flash Lite API
- **Configuration**: python-dotenv

### Processing Pipeline

1. **Download** ([download.py](src/download.py))
   - Extract video metadata (title, ID)
   - Download subtitles (priority: en > ko > any)

2. **Preprocessing** ([preprocessing.py](src/preprocessing.py))
   - Parse VTT subtitle format
   - Merge segments by time window (25 seconds default)

3. **AI Segmentation** ([llm_segmentation.py](src/llm_segmentation.py))
   - Call Gemini API with full transcript
   - Generate 8-15 descriptive topic titles
   - Fallback to simple segmentation if API fails

4. **Output** ([output.py](src/output.py))
   - Save TXT, CSV, JSON files
   - Include metadata and topic titles

### Progressive Loading (Web Interface)

The web interface uses a **two-stage pipeline**:

1. **Stage 1 (Fast)**: Download â†’ Parse â†’ Display basic transcript (~10-30 seconds)
2. **Stage 2 (Slow)**: AI segmentation â†’ Update with topic-based transcript (~30-60 seconds)

This ensures users see results immediately without waiting for AI processing.

## ğŸ”§ Advanced Features (For Developers)

### CLI Options

Disable AI segmentation:
```bash
python main.py <VIDEO_URL> --no-semantic
```

Custom output directory:
```bash
python main.py <VIDEO_URL> --output data/custom_folder
```

### Programmatic Usage

```python
from src.pipeline import process_video

# Full processing
output_paths = process_video(
    video_url="https://youtube.com/watch?v=...",
    output_dir="data/output",
    window_seconds=25,
    use_semantic=True
)

# Progressive processing (for web apps)
from src.pipeline import process_video_progressive

for stage, data in process_video_progressive(video_url="..."):
    if stage == "basic":
        print("Basic transcript ready:", data["content"])
    elif stage == "semantic":
        print("AI-segmented ready:", data["content"])
```

## ğŸ“ Contact & Feedback

If you encounter issues or have suggestions:
- Open an issue on GitHub
- Or contact via email

## ğŸ“ License

This program is free to use.

---

**Enjoy using it! ğŸ“š**